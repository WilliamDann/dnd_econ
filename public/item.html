<!DOCTYPE html>

<head>
    
</head>

<body>
    <script src="js/formBuilder.js"></script>
    <div id="create">
        <b>Create Item</b>
        <script>
            getSchema('Item')
                .then(data => document.querySelector('#create').appendChild(
                    buildForm(data.__type.fields, (container) => {
                        const name = container.querySelector('#name').value;
                        const desc = container.querySelector('#desc').value;

                        const query = `mutation { createItem(input:{name:"${name}", desc:"${desc}"}){id} }`

                        sendQuery(query)
                            .then(data => document.querySelector('#output').innerHTML = JSON.stringify(data))
                    })
                )
            );
        </script>
    </div>

    <br><br>

    <div id="get">
        <b>Get Item</b>
        <script>
            document.querySelector('#get').appendChild(
                buildForm(
                    [ {name:"ID", type:{ name:"String"} } ],
                    (container) => { 
                        const id    = document.querySelector('#ID').value;
                        const query = `query { getItem(id:"${id}"){name,desc,id} }`

                        sendQuery(query)
                        .then(data => document.querySelector('#output').innerHTML = JSON.stringify(data))
                    }
                )
            );
        </script>
    </div>

    <pre id="output">

    </pre>
</body>