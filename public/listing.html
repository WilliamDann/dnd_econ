<!DOCTYPE html>

<head>
    
</head>

<body>
    <script src="js/formBuilder.js"></script>
    <div id="create">
        <b>Create Listing</b>
        <script>
            getSchema('Listing')
                .then(data => document.querySelector('#create').appendChild(
                    buildForm(data.__type.fields, (container) => {
                        const itemid  = container.querySelector('#ItemID').value;
                        const count   = container.querySelector('#count').value;
                        const actorid = container.querySelector('#ActorID').value;

                        const query = `mutation { createListing(input:{item:"${itemid}", count:${count}, seller:"${actorid}"}){id} }`

                        sendQuery(query)
                            .then(data => document.querySelector('#output').innerHTML = JSON.stringify(data))
                    })
                )
            );
        </script>
    </div>

    <br><br>

    <div id="get">
        <b>Get Item</b>
        <script>
            document.querySelector('#get').appendChild(
                buildForm(
                    [ {name:"ID", type:{ name:"String"} } ],
                    (container) => { 
                        const id    = document.querySelector('#ID').value;
                        const query = `query { getActor(id:"${id}"){name,balance,id} }`

                        sendQuery(query)
                        .then(data => document.querySelector('#output').innerHTML = JSON.stringify(data))
                    }
                )
            );
        </script>
    </div>

    <pre id="output">

    </pre>
</body>